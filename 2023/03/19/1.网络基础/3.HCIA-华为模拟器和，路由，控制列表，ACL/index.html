<!DOCTYPE html><html lang="cn" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>HCIA-华为模拟器和，路由，控制列表，ACL | 碧蓝幻想</title><meta name="author" content="阿尔托莉雅"><meta name="copyright" content="阿尔托莉雅"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1.华为模拟器：1.操作模式： 用户视图模式（第一级别模式，可以对设备进行所有的查看及测试）： 1&lt;Huawei&gt;  配置模式（第二级别模式，改名，设置密码等） 1[Huawei]  专用配置模式（第三级别模式） 1[Huawei-?????]  专用配置模式（第四级别模式） 1[Huawei-?????-?????]  高级模式可以执行低级模式命令   2.用户视图配置命令： 查看接">
<meta property="og:type" content="article">
<meta property="og:title" content="HCIA-华为模拟器和，路由，控制列表，ACL">
<meta property="og:url" content="https://example.com/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/3.HCIA-%E5%8D%8E%E4%B8%BA%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%92%8C%EF%BC%8C%E8%B7%AF%E7%94%B1%EF%BC%8C%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%EF%BC%8CACL/index.html">
<meta property="og:site_name" content="碧蓝幻想">
<meta property="og:description" content="1.华为模拟器：1.操作模式： 用户视图模式（第一级别模式，可以对设备进行所有的查看及测试）： 1&lt;Huawei&gt;  配置模式（第二级别模式，改名，设置密码等） 1[Huawei]  专用配置模式（第三级别模式） 1[Huawei-?????]  专用配置模式（第四级别模式） 1[Huawei-?????-?????]  高级模式可以执行低级模式命令   2.用户视图配置命令： 查看接">
<meta property="og:locale">
<meta property="og:image" content="https://example.com/images/Otherwallpaper/avatar.png">
<meta property="article:published_time" content="2023-03-19T11:48:57.111Z">
<meta property="article:modified_time" content="2023-03-19T11:50:50.287Z">
<meta property="article:author" content="阿尔托莉雅">
<meta property="article:tag" content="网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://example.com/images/Otherwallpaper/avatar.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://example.com/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/3.HCIA-%E5%8D%8E%E4%B8%BA%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%92%8C%EF%BC%8C%E8%B7%AF%E7%94%B1%EF%BC%8C%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%EF%BC%8CACL/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'HCIA-华为模拟器和，路由，控制列表，ACL',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-19 19:50:50'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/images/Otherwallpaper/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archive/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/images/"><i class="fa-fw fas fa-image"></i><span> 图库</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 网易云音乐</span></a></li><li><a class="site-page child" href="/video/"><i class="fa-fw fas fa-video"></i><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/images/PCwallpaper/backgroud2.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="碧蓝幻想"><span class="site-name">碧蓝幻想</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archive/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/images/"><i class="fa-fw fas fa-image"></i><span> 图库</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 网易云音乐</span></a></li><li><a class="site-page child" href="/video/"><i class="fa-fw fas fa-video"></i><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">HCIA-华为模拟器和，路由，控制列表，ACL</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-03-19T11:48:57.111Z" title="Created 2023-03-19 19:48:57">2023-03-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-03-19T11:50:50.287Z" title="Updated 2023-03-19 19:50:50">2023-03-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C/">网络</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="HCIA-华为模拟器和，路由，控制列表，ACL"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="1-华为模拟器："><a href="#1-华为模拟器：" class="headerlink" title="1.华为模拟器："></a>1.华为模拟器：</h2><h3 id="1-操作模式："><a href="#1-操作模式：" class="headerlink" title="1.操作模式："></a>1.操作模式：</h3><ul>
<li><p>用户视图模式（第一级别模式，可以对设备进行所有的查看及测试）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置模式（第二级别模式，改名，设置密码等）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]</span><br></pre></td></tr></table></figure>
</li>
<li><p>专用配置模式（第三级别模式）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Huawei-?????]</span><br></pre></td></tr></table></figure>
</li>
<li><p>专用配置模式（第四级别模式）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Huawei-?????-?????]</span><br></pre></td></tr></table></figure>
</li>
<li><p>高级模式可以执行低级模式命令</p>
</li>
</ul>
<h3 id="2-用户视图配置命令："><a href="#2-用户视图配置命令：" class="headerlink" title="2.用户视图配置命令："></a>2.用户视图配置命令：</h3><ul>
<li><p>查看接口配置简介：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display interface brief</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Interface                   PHY   Protocol InUti OutUti   inErrors  outErrors</span><br><span class="line">GigabitEthernet0/0/0        up    up          0%     0%          0          0</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">PHY（物理状态，通电即为up）</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Protocol(协议，配置IP地址即为up)</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>保存配置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">save</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启设备：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-配置模式："><a href="#3-配置模式：" class="headerlink" title="3.配置模式："></a>3.配置模式：</h3><ul>
<li><p>查看当前配置</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display current-configuration</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置主机名</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如将[Huawei]改成[r1]</span></span><br><span class="line">sysname [name]</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置时间和时区：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">clock datetime [YY:MM:TT]</span><br><span class="line">clock timezone [时区名称] add [YY:MM:TT]   # 更改时区</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看时间和时区：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display clock</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看系统版本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display version</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看路由表：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">display ip routing-table</span><br><span class="line">display ip routing-table protocol [协议类型]   # 只查看其中一种协议的路由表</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看DHCP地址池：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display ip pool</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看DHCP获取报文情况</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display dhcp statistics	</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="4-接口配置命令："><a href="#4-接口配置命令：" class="headerlink" title="4.接口配置命令："></a>4.接口配置命令：</h3><ul>
<li><p>进入端口：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">interface ???Ethernet [端口号]</span><br></pre></td></tr></table></figure>
</li>
<li><p>undo取消此命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">undo shutdown # 开启端口</span><br><span class="line">shutdown  # 关闭端口</span><br><span class="line">undo ip address [IP地址] [网路地址长度/子网掩码]</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置端口IP地址和子网掩码或网络号长度</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip address [IP地址] [网路地址长度/子网掩码]</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看当前接口的所有配置</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display this</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="5-帮助命令："><a href="#5-帮助命令：" class="headerlink" title="5.帮助命令："></a>5.帮助命令：</h3><ul>
<li>？：查看该模式或该单词后可以配置的命令及注解</li>
<li>Tab键：自动补全单词</li>
</ul>
<h3 id="6-命令级别："><a href="#6-命令级别：" class="headerlink" title="6.命令级别："></a>6.命令级别：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">参观级：0，监控级：1，配置级：2，管理级：3级以上</span><br><span class="line">用户等级：0-15</span><br></pre></td></tr></table></figure>



<h2 id="2-Telnet（用户）："><a href="#2-Telnet（用户）：" class="headerlink" title="2.Telnet（用户）："></a>2.Telnet（用户）：</h2><ul>
<li><p>telnet是基于TCP协议的，端口号23</p>
</li>
<li><p>开启用户接口空间（先配置各接口IP地址）：写在被登录的设备 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]user-interface vty 0 4</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改认证模式为AAA</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">authentication-mode aaa</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入AAA接口模式</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]aaa</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建本地用户及密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Huawei-aaa]local-user huawei password cipher 123456</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改huawei用户的权限等级</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Huawei-aaa]local-user huawei privilege level 15</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改huawei用户的服务类型为telnet</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Huawei-aaa]local-user huawei service-type telnet</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试：连接telnet服务器</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;Telnet Client&gt;telnet 192.168.1.2</span><br><span class="line">Press CTRL_] to quit telnet mode</span><br><span class="line">Trying 192.168.1.2 ...</span><br><span class="line">Connected to 192.168.1.2 ...</span><br><span class="line"></span><br><span class="line">Login authentication</span><br><span class="line"></span><br><span class="line">Username:huawei</span><br><span class="line">Password:</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3-DHCP服务："><a href="#3-DHCP服务：" class="headerlink" title="3.DHCP服务："></a>3.DHCP服务：</h2><ul>
<li><p>基本概念：</p>
<ul>
<li><p>动态主机配置协议</p>
</li>
<li><p>C&#x2F;S架构：响应速度快</p>
</li>
<li><p>基于UDP，67&#x2F;68（68用于客户端，67、用于服务端）</p>
</li>
<li><p>报文类型：八种</p>
<ol>
<li>DHCP discover：客户端用于寻找DHCP服务器</li>
<li>DHCP offer：DHCP服务器回复客户端的DISCOVER报文，该报文携带了网络参数</li>
<li>DHCP request：客户端请求配置确认或续租</li>
<li>DHCP ack：服务器对request确认</li>
<li>DHCP nak：服务器对reqeust拒绝</li>
<li>DHCP release：客户端请求释放地址</li>
<li>DHCP decline：客户端用于检测IP地址冲突后，发送给服务器的</li>
<li>DHCP inform：当客户端获取IP报文后，使用哦个此报文获取其他配置信息</li>
</ol>
</li>
</ul>
</li>
<li><p>工作过程：</p>
<ol>
<li>客户机广播DHCP discover报文来发现当前网络中的DHCP服务器，并请求IP地址等相关信息<ul>
<li>路由器收到这个数据帧后，先看二层，一看是广播帧，所以，解二层封装；</li>
<li>将解开后的数据包发送给IP模块进行处理，IP模块需要先看目的IP地址，一看是受限广播地址，则解三层封装；</li>
<li>因为U<strong>协议字段为17（UDP）</strong>，则交给UDP模块UDP模块进行处理</li>
<li>之后依靠数据段中的目的<strong>端口号67（DHCP服务端）</strong>判断，交给对应的DHCP服务进行进一步处理</li>
</ul>
</li>
</ol>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">源端口号：68，目的端口号：67</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">源IP地址：0.0.0.0，目的IP地址：255.255.255.255</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">源MAC地址：他自己，目的IP地址：fffffff</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>DHCP服务器发送DHCP offer报文，携带即将分配给客户机的IP地址和相关信息</li>
</ol>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">源端口号：67，目的端口号：68</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">源IP地址：他自己IP地址，目的IP地址：分配的IP地址（华为），255.255.255.255（其他厂家）</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">源MAC地址：他自己，目的IP地址：客户机MAC地址（华为）,fffffff（其他厂家）</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>客户机接受此分配，广播DHCP request报文，向服务器请求使用该IP地址<ul>
<li>一方面需要告诉获取IP地址的服务器，请求该IP地址；</li>
<li>另一方面，需要告诉剩余没有获取IP地址的服务器，可以释放该IP地址</li>
</ul>
</li>
</ol>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">源端口号：68，目的端口号：67</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">源IP地址0.0.0.0，目的IP地址：255.255.255.255</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">源MAC地址：他自己，目的IP地址：fffffff</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>DHCP服务器收到后，发送DHCP ack报文，告知客户机允许使用该IP地址</li>
</ol>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">源端口号：67，目的端口号：68</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">源IP地址：他自己IP地址，目的IP地址：分配的IP地址（华为），255.255.255.255（其他厂家）</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">源MAC地址：他自己，目的IP地址：客户机MAC地址（华为）,fffffff（其他厂家）</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>客户机使用无故ARP来检测是否有人使用此IP地址，若没有人响应就使用。</li>
</ol>
</li>
<li><p>DHCP租期：</p>
<ul>
<li>租期更新计时器：<ul>
<li>华为默认24小时：</li>
<li>租期到达一半（12小时）<ol>
<li>PC发送一个DHCP request报文，是<strong>单播</strong>发送</li>
<li>若服务器回复ACK报文，则租期更新计时器刷新</li>
<li>若服务器回复MAK报文，PC等待下一个更新周期</li>
</ol>
</li>
</ul>
</li>
<li>租期重绑计时器：<ul>
<li>当租期到达87.5%（21小时），此时PC进行第二次续租</li>
<li>PC发送DHCP Request，使用<strong>广播</strong><ul>
<li>如果收到ACK报文，则刷新各类计时器，并绑定新的服务器</li>
<li>如果收到NAK报文，则PC必须立刻停止使用现在使用的IP地址，然后重新申请IP地址</li>
</ul>
</li>
</ul>
</li>
<li>租期失效计时器：<ul>
<li>PC在租期内正常到期，服务器没有回复，PC才停止使用该IP地址，并发送DHCP release报文<ul>
<li>PC重新进入DHCP工作流程，发送DHCP discover报文申请IP地址</li>
</ul>
</li>
<li>PC主动放弃使用分配得的IP地址，此时发送DHCP release报文</li>
</ul>
</li>
</ul>
</li>
<li><p>地址池：</p>
<ul>
<li>全局地址池：为所有连接到服务器的PC提供地址</li>
<li>接口地址池：为连接到该接口</li>
</ul>
</li>
<li><p>先给路由器端口和服务器配置IP地址子网掩码</p>
</li>
<li><h3 id="全局地址池配置："><a href="#全局地址池配置：" class="headerlink" title="全局地址池配置："></a>全局地址池配置：</h3><ul>
<li><p>开启DHCP服务（在配置模式下）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dhcp enable</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建名为…的全局地址池：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip pool [name]  # 一台设备上可以创建多个池塘，但一个池塘只能服务一个广播域</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置IP地址池的子网地址和子网掩码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">network [IP网段] mask [子网掩码/网络地址长度] </span><br></pre></td></tr></table></figure>
</li>
<li><p>配置默认网关：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gateway-list [IP地址]</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置DNS服务器IP地址：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dns-list [IP地址1] [IP地址2]</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置地址租约时间（可选，默认24小时）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lease day [num] hour [num]</span><br></pre></td></tr></table></figure>
</li>
<li><p>排除IP地址：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">excluded-ip-address 192.168.1.253 192.168.1.253   # 将192.168.1.253排除在地址段外</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入相对应的端口，启动dhcp服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dhcp select global</span><br></pre></td></tr></table></figure>
</li>
<li><p>在终端上设置IPv4设置为DHCP</p>
</li>
</ul>
</li>
<li><h3 id="接口地址池配置：（了解）"><a href="#接口地址池配置：（了解）" class="headerlink" title="接口地址池配置：（了解）"></a>接口地址池配置：（了解）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]dhcp enable</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]dhcp select interface //开启接口DHCP功能</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]dhcp server dns-list 114.114.114.114</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]dhcp server excluded-ip-address 192.168.1.10 192.168.1.253</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]dhcp server static-bind ip-address 192.168.1.5 mac-address 5489-9842-3FA4</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="4-VLAN虚拟局域网"><a href="#4-VLAN虚拟局域网" class="headerlink" title="4.VLAN虚拟局域网"></a>4.VLAN虚拟局域网</h2><ul>
<li><p>网络速率 约等 带宽&#x2F;8)*85%</p>
</li>
<li><p>交换机和路由器协同工作后，将原来的一个广播域逻辑的切分为多个</p>
</li>
<li><p>交换机创建VLAN（在配置模式下）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vlan [num]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">用户范围1~4094，VLAN1已存在，默认所有的接口都存在VLAN1中</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">批量创建</span></span><br><span class="line">vlan batch [num1] to [num2]   </span><br><span class="line">vlan batch [num1] to [num2] [num3] to [num4]  </span><br></pre></td></tr></table></figure>
</li>
<li><p>交换机查看VLAN</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display vlan</span><br></pre></td></tr></table></figure>
</li>
<li><p>给交换机接口划分VLAN（进入该接口）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">port link-type access        # 先将该接口修改为接入模式</span><br><span class="line">port default vlan [num]      # 将该接口划分到对应的VLAN中</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">批量的将多个接口划分到VLAN中</span></span><br><span class="line">port-group group-member Ethernet [接口号] to Ethernet [接口号]</span><br><span class="line">port link-type access</span><br><span class="line">port default vlan [num]</span><br></pre></td></tr></table></figure>
</li>
<li><p>给交换机接口设置trunk模式，并设置允许通过VLAN（先进入接口模式下）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">port link-type trunk    # 将接口修改为trunk模式</span><br><span class="line">port trunk allow-pass vlan [[num1] to [num2] / all]   # 默认华为交换机仅允许VLAN1通过，需要定义允许列表</span><br></pre></td></tr></table></figure>
</li>
<li><p>给路由器创建子接口，定义其管理的VLAN，配置IP地址，开启ARP功能</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface g[子端口]                         # 如：0/0/0.1，创建子接口</span><br><span class="line">dot1q termination vid [num]                # 定义其管理的VLAN</span><br><span class="line">ip address [IP地址] [子网掩码/网络地址长度]</span><br><span class="line">arp broadcast enable                         # 开启ARP功能</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="5-路由："><a href="#5-路由：" class="headerlink" title="5.路由："></a>5.路由：</h2><h3 id="1-静态路由："><a href="#1-静态路由：" class="headerlink" title="1.静态路由："></a>1.静态路由：</h3><ul>
<li><p>查看路由表详情：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">目的地址/掩码         协议      优先级  开销值           下一条           接口</span><br><span class="line">Destination/Mask    Proto     Pre    Cost      Flags  NextHop         Interface</span><br><span class="line">127.0.0.0/8         Direct    0      0         D      127.0.0.1       InLoopBack0</span><br><span class="line">127.0.0.1/32        Direct    0      0         D      127.0.0.1       InLoopBack0</span><br></pre></td></tr></table></figure>
</li>
<li><p>若匹配上多条路由项，则按照 “<strong>最长掩码匹配规则</strong>“ 进行选择</p>
</li>
<li><p>路由的来源：</p>
<ul>
<li>直连路由：设备自动发现</li>
<li>静态路由：手工配置</li>
<li>动态路由：通过动态协议算法计算得出</li>
</ul>
</li>
<li><p>路由优先级：</p>
<table>
<thead>
<tr>
<th>路由来源</th>
<th>缺省优先级（华为）</th>
<th>缺省优先级（思科）</th>
</tr>
</thead>
<tbody><tr>
<td>直连路由</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>OSPF</td>
<td>10</td>
<td>110</td>
</tr>
<tr>
<td>静态路由</td>
<td>60</td>
<td>100</td>
</tr>
<tr>
<td>RIP</td>
<td>100</td>
<td>120</td>
</tr>
<tr>
<td>BGP</td>
<td>255</td>
<td>255</td>
</tr>
<tr>
<td>EIGRP</td>
<td></td>
<td>90</td>
</tr>
</tbody></table>
</li>
<li><p>如果时跳转到下一个路由器的下一个路由器的相连网段，下一跳路由器端口的IP地址写（下一个路由器）</p>
</li>
<li><p>可以对多个网段进行聚合，减少路由表的条数</p>
</li>
<li><p><strong>配置了源路由到目标路由的静态路由，还需配置目标路由到源路由的静态路由</strong></p>
</li>
<li><p>配置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route-static [目标IP网段] [子网掩码/网络地址长度] [下一跳路由器端口的IP地址]</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route-static 172.16.1.0 24 GigabitEthernet 0/0/1 192.168.1.2   # 接口配置静态路由（了解）</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-路由扩展配置："><a href="#2-路由扩展配置：" class="headerlink" title="2.路由扩展配置："></a>2.路由扩展配置：</h3><ol>
<li><p>负载均衡（等价鲈鱼）：当访问相同目标，<strong>具有多条开销相等路径时</strong>，可以让设备将流量拆分后延多条路径同时传输，起到带宽叠加的作用，减少单条链路数据传输压力</p>
</li>
<li><p>环同接口：创建后，可用于路由器测试TCP&#x2F;IP协议组件是否能封装与解封；同时可用于实验环境中，<strong>模拟连接PC终端的用户接口</strong>，来减少实际设备成本需求。</p>
<ul>
<li><p>创建LoopBack虚拟接口（配置模式下）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">interface LoopBack [0~2147483647]</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置虚拟接口IP地址</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip address 1.1.1.1 24</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建环回接口可以在本设备上ping通本设备上的所有端口，相当于本设备连接了一个虚拟终端PC</p>
</li>
</ul>
</li>
<li><p>手工汇总：当路由器需要配置多条路由项时，可以选择将其进行<strong>子网汇总</strong>，减少路由表项数量，降低CPU运算负载，提高转发效率</p>
</li>
<li><p>路由黑洞：在手工汇总时，可能会包含一些网络中实际<strong>不存在的网段</strong>，造成流量有去无回的现象，浪费了链路资源</p>
</li>
<li><p>缺省路由：一条不限定目标的路由，代表所有的网段；路由器查表时在查询完本地所有的直连，静态，动态路由后若依然没有可达路径，才使用该条目。</p>
<ul>
<li><p>设置缺省路由：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route-static 0.0.0.0 0.0.0.0 &lt;下一跳路由器的IP地址&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>空接口：当路由黑洞与缺省路由相遇时，将必然出现环路；在黑洞路由器上（<strong>汇总路由的下一跳路由器</strong>），<strong>配置一条到达汇总网段的空接口路由</strong>，空接口及丢弃流量，来<strong>避免环路</strong>的产生。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route-static [汇总后的IP地址] [子网掩码/网络地址长度] NULL 0   # 除路由黑洞和缺省相遇的情况外，汇总的网段的路由器上都得写</span><br></pre></td></tr></table></figure>
</li>
<li><p>浮动静态：访问相同目标，具有多条路径时，将加载优先级最小的路径到表中；若优先级相同将同时加入表中（负载均衡）；因此修改部分路由的<strong>优先级</strong>，可以实现静态备份的效果。</p>
<ul>
<li><p>设置静态路由优先级：（越小优先级越大）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route-static [目标IP地址] [子网掩码/网络地址长度] preference [num]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>环路：当两个路由器上的路由表，分别存在一条到达同一网段且下一条是另一台路由器时，将形成环路</p>
<ul>
<li>占用大量带宽，影响正常数据包转发</li>
<li>损耗路由器资源，当路由器资源消耗过大时，设备会宕机</li>
<li>解决方式—TTL</li>
</ul>
</li>
</ol>
<h3 id="3-动态路由"><a href="#3-动态路由" class="headerlink" title="3.动态路由"></a>3.动态路由</h3><ul>
<li><p>静态协议的优缺点及结论：</p>
<ul>
<li><p>缺点：</p>
<ol>
<li>中大型网络配置量过大</li>
<li>不能基于拓扑的变化而实时变化</li>
</ol>
</li>
<li><p>优点：</p>
<ol>
<li>不会额外占用物理资源</li>
<li>安全问题</li>
<li>计算路径问题</li>
</ol>
</li>
<li><p>结论：小型网络建议使用静态路由；中大型较复杂网络，建议使用动态</p>
</li>
</ul>
</li>
<li><p>动态路由协议：</p>
<ul>
<li><p>概念：路由器间沟通，协商，计算自动生成路由表；在拓扑结构发生变化后，可以实时收敛（重新计算）来适应新的结构</p>
</li>
<li><h4 id="基于AS进行分类：（AS自治系统-0-65535标准编号）"><a href="#基于AS进行分类：（AS自治系统-0-65535标准编号）" class="headerlink" title="基于AS进行分类：（AS自治系统 0~65535标准编号）"></a>基于AS进行分类：（AS自治系统 0~65535标准编号）</h4><ul>
<li>IGP 内部网关路由协议，AS内部使用（RIP，OSPF，EIGRP，ISIS…..）</li>
<li>BGP 外部网关路由协议，AS之间使用（BGP，EGP）</li>
</ul>
</li>
<li><h4 id="IGP分类："><a href="#IGP分类：" class="headerlink" title="IGP分类："></a>IGP分类：</h4><ul>
<li>基于工作特点进行分类：<ul>
<li>DV 距离矢量（RIP，EIGRP）：向相邻路由器共享路由表</li>
<li>LS 链路状态（OSPF，ISIS）：向邻接路由器共享拓扑图，自我计算路由；<ul>
<li>优点：防环能力上优于距离矢量，选路能力上也优于距离矢量；</li>
<li>缺点：更新量大，占带宽</li>
</ul>
</li>
</ul>
</li>
<li>基于更新时是否携带子网掩码：<ul>
<li>有类别（不携带子网掩码，按主类定义子网掩码）</li>
<li>无类别（携带子网掩码，基于实际掩码来判断网段）</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="1-RIP协议："><a href="#1-RIP协议：" class="headerlink" title="1.RIP协议："></a>1.RIP协议：</h4><ul>
<li><p>RIP：路由信息协议，也称距离矢量协议</p>
</li>
<li><p>存在三个版本：V1  &#x2F;  V2 &#x2F; NG（下一代IPV6专用）</p>
</li>
<li><p>特点：</p>
<ul>
<li><p>基于<strong>UDP520端口</strong>工作；<strong>使用跳数作为度量（最大跳数为15，当值为16时，该路由不可达）</strong>；</p>
</li>
<li><p>更新方式：<strong>30s周期更新</strong>（保活，确认），<strong>触发更新</strong>（开销值发生变化时）；</p>
</li>
<li><p>支持等开销负载均衡</p>
</li>
</ul>
</li>
<li><p>V1和V2的区别：</p>
<ul>
<li>更新是是否携带掩码：<ul>
<li>V1有类别协议（不携带子网掩码），不能区分和汇总</li>
<li>V2无类别协议（携带子网掩码），进行子网划分（VLSM）和子网汇总（不能比主类短），不支持<strong>超网</strong>（可以比主类短）</li>
</ul>
</li>
<li>更新方式：<ul>
<li>V1是广播更新（255.255.255.255）</li>
<li>V2组播更新（224.0.0.9）</li>
</ul>
</li>
<li>V2支持手工认证</li>
</ul>
</li>
<li><h3 id="RIP环路问题："><a href="#RIP环路问题：" class="headerlink" title="RIP环路问题："></a>RIP环路问题：</h3><p><img src="C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20221026170448015.png" alt="image-20221026170448015"></p>
<ul>
<li><p>触发更新：</p>
<ul>
<li>当某一个路由器中的<strong>路由项发生改变</strong>时，不需要等待下一次周期更新到来，就可以直接将发生改变的路由项发送</li>
<li>不能完全避免环路发生</li>
</ul>
</li>
<li><p>水平分割（华为默认开启）：从此口进（从此口学到的路由），不从此口出（下一次不从此口发出去）</p>
</li>
<li><p>毒性逆转：当这条路由不可达时，向对方发送这条路由，但度量为16；然后打破水平分割，将此路由发回来进行确认，然后扩散这条路由</p>
</li>
<li><p>跳数限制：15跳为最大条数</p>
</li>
<li><p>抑制计时器</p>
</li>
<li><p>注意：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">水平分割和毒性逆转机制，原理相同，但是做法不同，故只能选择其中一个与触发更新搭配防环。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">若水平分割和毒性逆转机制同时开启，则按照毒性逆转执行。</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>例题：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">问题：能不能光使用水平分割或毒性逆转机制，不使用触发更新？</span><br><span class="line">答：理论上可以，但实际不行；触发更新可以加快路由的收敛速度。</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>RIP的数据包：</p>
<ul>
<li>request包（请求报文）：只能在启动RIP进程后使用，希望尽快获取邻居的路由信息</li>
<li>response包（应答报文）：携带了具体的路由信息，用来回答请求报文（周期发送）</li>
</ul>
</li>
<li><p>RIP工作原理：</p>
<ol>
<li><p>初始化：</p>
<ul>
<li>RIP在初始化时，会从每一个参与工作的接口上发送请求数据包。该请求数据包会向所有的RIP路由器请求一份完整的路由表</li>
<li>该请求通过广播形式（组播形式）发送</li>
</ul>
</li>
<li><p>接受请求：</p>
<ul>
<li>RIP路由器在接收到请求数据包后，会使用应答数据包回复，且<strong>该数据包包含了本地所有的路由信息</strong></li>
</ul>
</li>
<li><p>接受到响应数据包：</p>
<ul>
<li>路由器接收并处理该数据包</li>
<li><strong>将接受到的数据包内容与自己本地路由表</strong>进行对比，然后进行添加，删除，修改等操作</li>
</ul>
</li>
<li><p>常规路由更新：</p>
<ul>
<li><p>当收敛完成后，路由器会以30S为周期，发送应答包文</p>
</li>
<li><p>邻居路由器收到应答报文后，会设置180s的超时时间，如果180s内没有收到邻居发来的应答报文，路由器会认为邻居出现问题，并将下一跳设置为16</p>
</li>
</ul>
</li>
</ol>
</li>
<li><p>RIP算法：贝尔曼福特算法</p>
<ol>
<li>当接收到的数据包中含有本地路由表中没有的路由项，则直接加载到本地路由表</li>
<li>当接收到的数据包含有本地已具有的路由项时，且下一跳地址相同，则将数据包中的路由项更新至本地</li>
<li>当接收到的数据包中含有本地已具备的路由项时，但下一跳不同，则比较COST值，若本地路由表中的COST值较大，则进行更；若本地路由表中的COST值较小，则不进行更新</li>
</ol>
</li>
<li><p>RIP计时器：</p>
<ul>
<li><p>更新计时器：</p>
<ul>
<li>每台启动了RIP协议的路由器，都有一个属于自己的更新计时器</li>
<li>30S</li>
<li>当更新<strong>计时器为0</strong>时，则向周围<strong>发送响应报文</strong></li>
<li>为什么要进行周期更新？<ul>
<li>UDP是不可靠的</li>
<li>RIP路由传递过程中需要可靠机制</li>
<li>RIP</li>
</ul>
</li>
</ul>
</li>
<li><p>无效计时器：</p>
<ul>
<li>每台路由器上的每一个路由项都有一个无效计时器</li>
<li>180S(一般是更新计时器的六倍)</li>
<li>每条路由条目被更新时，计时器刷新为180S</li>
<li>当<strong>计时器为0</strong>时，则认为该<strong>路由项无效</strong>，会将<strong>开销值设置为16</strong>，并向外传输（告诉其他路由器，这个网段不可达）</li>
</ul>
</li>
<li><p>垃圾收集计时器：</p>
<ul>
<li><strong>当一个路由项变为无效路由项时</strong>，虽然COST值会被设置为16，但是路由项本身并不会被立刻删除，而是会<strong>启动垃圾收集计时器</strong>，在这个计时器倒计时为0前，该路由器周期更新时仍然会携带该无效路由项</li>
<li>一旦该<strong>计时器为0</strong>，则<strong>删除该路由项</strong>（包括之前与之对应的无效计时器，垃圾收集计时器）</li>
<li>120S（更新计时器的四倍）</li>
<li>注意：垃圾收集计时器为0前的某一时刻，该路由项被更新，则该路由项可以正常加表使用，COST值回复，删除垃圾收集计时器，回复无效计时器</li>
</ul>
</li>
<li><p>例题：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">假设某一时刻，一台路由器的RIP路由器中共有30个路由项，其中COST值的有23个，等于16的有7个，问，此时一共有多少个计时器在工作？分别是什么计时器？</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>具体配置步骤：</p>
<ol>
<li>启动RIP：（配置模式下，启动时可以定义进程号，默认1，范围1~65535）</li>
</ol>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rip [进程IP]</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>选择版本：（版本1：其他路由获取得到的IP地址是主类，版本2：其他路由获取得到的IP地址是精确的网络地址）</li>
</ol>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">version [num]</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>宣告（含义：激活（被选中接口可以收发RIP的信息）和共享路由（被选中接口的网段可以共享给本地的所有邻居））：</li>
</ol>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">network [端口网络地址]</span><br><span class="line">如：network 12.0.0.0   network 172.16.0.0   network 192.168.1.0 </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果有多个不同的主类端口，宣告多次；如果多个接口主类相同，只宣告一次</span> </span><br></pre></td></tr></table></figure>
</li>
<li><p>RIP的扩展配置：</p>
<ul>
<li><p>RIPversion2的手工汇总：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rip summary-address [汇总网段] [子网掩码]    # 在发送RIP数据包接口上汇总</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在对方的路由器上查看路由表，验证是否汇总</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>RIPversion2的认证：（所有RIP的信息将被加密传输，两两直连的邻居间，认证口令和模式必须完全一致）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">接口配置</span></span><br><span class="line">rip authentication-mode [加密算法] usual cipher [具体密码] </span><br></pre></td></tr></table></figure>
</li>
<li><p>沉默接口（只收不发路由协议信息，只能用于连接用户终端的接口）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这些接口在沉默后即使被宣告，依然不会被</span></span><br><span class="line">slient-interface ???Ethernet[端口号]  # 先进入rip</span><br></pre></td></tr></table></figure>
</li>
<li><p>加快收敛：适当的修改计时器，可以加快协议的收敛速度；修改时，全网所有运行RIP的设备建议一致；维持原有倍数关系，且不易修改的过小。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">更新30S，实效180s,刷新300s（cisco240s）</span></span><br><span class="line">timers rip [更新时间] [失效时间] [刷新时间]   # 单位s，先进入rip</span><br></pre></td></tr></table></figure>
</li>
<li><p>缺省路由：在<strong>边界路由器上</strong>定义缺省源头信息后，将向内网发布缺省路由，之后内部路由器将自动生成缺省路由指向边界路由器方向，边界路由器指向ISP的缺省路由，依然需要手写</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">default-route originate   # 先进入rip</span><br></pre></td></tr></table></figure>
</li>
<li><p>域外某网段修改开销值：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rip metricin ip-prefix p24 3    # 先进入某接口</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="2-OSPF协议："><a href="#2-OSPF协议：" class="headerlink" title="2.OSPF协议："></a>2.OSPF协议：</h4><ul>
<li><p>OSPF：开放式最短路径优先协议，<strong>无类别（带掩码）链路状态igp协议</strong>，周期更新（30min）+触发更新</p>
</li>
<li><p>跨四层封装（传输层），基于IP封装，协议号89</p>
</li>
<li><p>版本：v1（实验室阶段夭折），v2（IPv4），v3（IPv6）</p>
</li>
<li><p>链路状态协议的更新量随着网络范围的扩展指数性的上升，因此OSFP协议为了在中大型网络中工作，<strong>需要结构化的部署</strong>（<strong>区域之内传递拓扑，区域传递路由</strong>）</p>
</li>
<li><p>为什么需要结构化部署：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">因为OSPF是无类别链路状态IGP协议，而链路状态最大的特点就是共享拓扑，而共享拓扑；而共享拓扑的话就会产生大量的更新这样不利于网络的流通，因此需要合理的流畅，因此需要合理的IP规划，进行结构化部署。区域之内是LSA的拓扑数据交换：区域之内传递拓扑，区域传递路由</span><br></pre></td></tr></table></figure>
</li>
<li><p>区域划分的目的或链路状态协议的距离矢量特征：区域之内传递拓扑，区域传递路由</p>
</li>
<li><p>更新方式：组播更新（224.0.0.5（all），224.0.0.6（DR&#x2F;BDR））</p>
</li>
<li><p>算法：SPF（最短路径优先算法）</p>
</li>
<li><p>OSPF的五种数据包：</p>
<ol>
<li>Hello：1.邻居的发现，关系的建立；2.周期（以太网10s）的保活；3.携带rid（IP地址格式）</li>
<li>Dbd：数据库描述报文（本地数据库目录（发送链路状态中自身知道的）），LSDB：链路状态数据库，存储LSA信息的数据库</li>
<li>Lsr：链路状态请求报文（请求对方我不知道的）</li>
<li>Lsu：链路状态更新报文（返回我不知道的拓扑或者路由）</li>
<li>Lsack：链路状态确认报文（保证可靠性）</li>
</ol>
</li>
<li><p>OSPF的7个状态机：（两个路由器的关系）</p>
<ol>
<li><p><strong>Down</strong>：双方都不认识对方（A与B）</p>
</li>
<li><p><strong>init初始化</strong>：，B接收到hello包中（不包含自己的名字），B知道了A，B进入init状态</p>
</li>
<li><p><strong>2way双向通讯</strong>：B接收到hello包中（包含自己的名字），<strong>邻居关系建立</strong>的标志</p>
<ul>
<li>条件匹配成功进入下一个状态，如果条件匹配失败，则停留在邻居关系，仅使用hello进行周期保活</li>
</ul>
</li>
<li><p><strong>Exstart预启动</strong>：使用不携带目录信息的DBD包，1.进行主从关系的选举；<strong>rid大为主</strong>，为主的可以优先获取LSA信息，解决了目录共享时的无序，避免了它们的同时更新；2.主方可以住到隐形确认，可以定义隐形确认中的序列号。</p>
</li>
<li><p><strong>Exchange准交换</strong>：使用携带目标信息的dbd包（谁的rid大先发送dbd包），共享本地数据库目录</p>
</li>
<li><p><strong>loading加载</strong>：查看完邻接的dbd信息后，对比本地，然后基于本地未知的Lsa进行查询；使用lsr向对端查询，对端使<strong>用lsu来传输这些lsa信息</strong>，本地<strong>收到后需要lsack来进去确认</strong></p>
</li>
<li><p><strong>Full</strong>：<strong>邻接关系建立</strong>标志；意味着邻接间，数据库同步（一致）；邻接关系的设定是为了和之前邻居关系进行区分，邻居关系只是单纯的使用hello包进行保活，而只有邻接关系，才会发LSA信息</p>
</li>
</ol>
</li>
<li><p>名词解释：</p>
<ul>
<li>邻居关系：邻居关系就是只交互过hello报文，并不知道邻居具体的Lsa</li>
<li>邻接关系：就是两个邻居之间完成交互过各种报文，两台路由器拥有各自的明细拓扑信息Lsdb完全同步</li>
<li>Lsdb：链路状态数据库，所有lsa的集合</li>
<li>Lsa【货物】：链路状态通告，具体的一条一条拓扑或路由信息，基于LSU包进行共享（LSU运输）</li>
</ul>
</li>
<li><p>结构突变：</p>
<ul>
<li>新增网段：触发更新– LSU和LSack 直接告知</li>
<li>断开网段：触发更新– LSU和LSack 直接告知</li>
<li>无法沟通：dead time为hello包的4倍；在4次周期内未收到对端的hello包，将断开与其邻居关系，删除通过该邻居计算所得路由</li>
</ul>
</li>
<li><h3 id="OSPF的工作过程："><a href="#OSPF的工作过程：" class="headerlink" title="OSPF的工作过程："></a>OSPF的工作过程：</h3><ol>
<li>启动配置完成后，OSPF向本地所有运行协议的接口以组播224.0.0.5的形式发送hello包，（包含本地的RID以及自己已知的邻居的RID）；之后，将收集到的邻居关系记录在一张表 — <strong>邻居表</strong></li>
<li>之后需要关注条件，若不能建立为邻接，将保持为邻接关系，仅hello包周期保活</li>
<li>若条件匹配可以建立邻接关系，先使用未携带数据库目录信息的DBD包来进行主从关系的选举，之后由主引导先后顺序使用携带目录信息的DBD包共享数据库目录</li>
<li>之后本地基于其他设备的目录，判断由本地未知的LSA信息，再使用LSR&#x2F;LSU&#x2F;LSACK来通过邻接获取具体的LSA信息，完成本地的<strong>数据库表</strong>（LSDB链路状态数据库）</li>
<li>本地数据库完整后，本地将基于数据库中的内容启动SPF算法，将数据库整理为有向图–&gt;最短路径树—-&gt;将本地到达所有未知网段的最短路径加载于本地的<strong>路由表</strong>中</li>
<li>路由表建立完成，收敛结束，之后每<strong>10S</strong>使用<strong>hello</strong>包周期保活；每<strong>30min</strong>邻接间进行一次<strong>数据库目录核对</strong></li>
</ol>
</li>
<li><h4 id="区域划分规则："><a href="#区域划分规则：" class="headerlink" title="区域划分规则："></a>区域划分规则：</h4><ol>
<li><p>星型结构：编号0骨干区域（中心），大于0为非骨干区域（分支），非骨干区域必须直连骨干区域</p>
</li>
<li><p>必须存在ABR：区域边界路由器，骨干区域0与非骨干区域相连&gt;0的设备；区域之间可以存在多个ABR设备；一个ABR也可以连接多个区域</p>
</li>
</ol>
</li>
<li><p>区域ID：用来区分和标识OSPF的不同区域，32位二进制构成；也可以使用点分十进制表示，还可以直接使用十进制表示；其中，骨干区域的ID、必须设置为0。</p>
</li>
<li><h3 id="RID（路由器id）："><a href="#RID（路由器id）：" class="headerlink" title="RID（路由器id）："></a>RID（路由器id）：</h3><ul>
<li><p>格式IPv4地址，可以区分和标定不同的路由器</p>
</li>
<li><p>32位二进制构成，全网唯一，格式统一（采用点分十进制的方式表示）</p>
</li>
<li><p>RID的获取方式：</p>
<ol>
<li><p>手工配置：</p>
</li>
<li><p>自动生成：1.优先选择环回接口中IP地址最大的作为RID，2.如果没有环回，则选择物理接口中IP地址最大的作为RID</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p>基础配置：</p>
<ol>
<li><p>启动时定义进程号（配置模式，默认进程1）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ospf [num] router-id [路由器id]</span><br></pre></td></tr></table></figure>
</li>
<li><p>宣告接口地址（激活（可以收发OSPF的信息），被选中接口的拓扑信息可以共享给邻接，区域划分）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">area 0   # 先定义区域</span><br><span class="line">network [接口IP地址] [反子网掩码]   </span><br></pre></td></tr></table></figure>
</li>
<li><p>查询ospf：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">display ospf peer   # 查看邻居关系表</span><br><span class="line">display ospf peer brief   # 查看邻居简表</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">display ospf lsdb    # 查看LSDB</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">邻居关系建立后，关注件匹配失败，保持为邻居关系，仅hello包周期保活；匹配成功过，可以建立邻接关系；邻接关系间，将使用  DBD/LSR/LSU/LSack来获取本地未知的LSA信息，完整本地的LSDB（数据库表）</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">display ip routing-table protocol ospf   # 查看ospf路由</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">优先级为10;度量为cost值；cost值=开销值</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">当数据库同步完成后，本地基于SPF（最短路径有心啊）算法，将数据录转换为有向图，再将有向图转换为树形结构；之后基于树形结构，以本地为起点到达所有未知网段的最短路劲，加载到路由表中。</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bandwidth-reference 1000    # 若修改带宽，全网需要一致（单位MB/s），先进入ospf</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">OSPF cost=参考带宽/接口带宽，-----默认参考带宽为100M</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">OSPF优先cost值之和最小，为最佳路径；</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">若两条链路cost值之和相同，等开销负载均衡；若接口带宽大于参考带宽，cost为1，将可能导致选路不佳，建议修改默认的参考带宽</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>扩展配置：</p>
<ol>
<li><p>DR（一个路由器）&#x2F;BDR（备份路由器）选举（有DR才有拓扑交换和lsa信息，才有路由）：</p>
<ul>
<li><p>邻居成为邻接关系的条件，与网络类型有关</p>
</li>
<li><p>网络类型：</p>
<ul>
<li>点到点：在一个网段内只能存在两个节点（串线链路）</li>
<li>MA-多路访问：在一个网段内的节点数量不限制；不是当下连接了几个节点；而是该网络类型允许<strong>最终连接多个节点</strong>（以太网）</li>
</ul>
</li>
<li><p>点到点网络邻居关系必成为邻接关系；</p>
</li>
<li><p>在MA网络中，将进行DR&#x2F;BDR选举；在一个<strong>网段</strong>中仅DR（大哥）&#x2F;BDR（二哥）与DRother其他路由器（小弟）为邻接关系，非DR&#x2F;BDR之间（小弟与小弟之间）为邻居关系</p>
<ul>
<li><p>选举规则：</p>
<ol>
<li>先比较<strong>一个网段</strong>所有参选接口的优先级，默认优先级为1，取值范围0-255，越大越优；0标识不参选</li>
<li>若优先级相同，比较参选设备的RID，数值大优</li>
</ol>
</li>
<li><p>干涉选举：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ospf dr-priority 1   # 先进入这个参选接口</span><br></pre></td></tr></table></figure>

<p>注：由于网段DR&#x2F;BDR选举需要消耗40S，故为保障网络的稳定性，选举是<strong>非抢占的</strong>；一旦一个网段选举完成后，再修改优先级除非设备重启，否则无法干涉到结果；若需要干涉选举时，可以重启所有设备的OSPF</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reset opsf process   # 重启ospf进程</span><br></pre></td></tr></table></figure>

<p><strong>最终的方法时修改非DR&#x2F;BDR设备的优先级为0，代表不参选；不用重启进程</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ospf dr-priority 0   # 先进入这个参选接口</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>区域汇总：OSPF协议不支持接口汇总，只能在将A区域拓扑计算所得路由共享给B区域时进行汇总</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ospf [num]</span><br><span class="line">area [num]    # 进入区域的边界路由器配置</span><br><span class="line">abr-summary [汇总后的IP地址] [子网掩码]</span><br><span class="line">display ip routing-table protocol ospf   # 在另一个区域的路由器查看是否汇总</span><br></pre></td></tr></table></figure>
</li>
<li><p>被动接口：仅接收不发送路由协议信息，用于连接用户终端的接口，不得用于建立邻接关系</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">silent-interface g0/0/0</span><br></pre></td></tr></table></figure>
</li>
<li><p>认证：在直连邻居或者邻接的接口上配置，保障更新的安全</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ospf authentication-mode [加密算法] [编号] cipher [具体密码]    # 模式，编号，密码要求邻居间一致</span><br></pre></td></tr></table></figure>
</li>
<li><p>加快收敛：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ospf timer hello [num]   # 先进入接口</span><br></pre></td></tr></table></figure>

<ul>
<li>邻居间计时器 10s hello time，40s dead time</li>
<li>ospf要求直连邻居间hello time和dead time必须完全一致，否则无法建立邻居关系</li>
<li>修改本地的hello time，本地的dead time自动4倍关系匹配</li>
</ul>
</li>
<li><p>缺省路由：<strong>边界路由器上配置</strong>后，将自动向内网下方一条缺省路由，之后<strong>内网设备将自动生成缺省路由边界</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ospf [num]</span><br><span class="line">default-route-advertise always   </span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h4 id="3-RIP与OSPF的区别："><a href="#3-RIP与OSPF的区别：" class="headerlink" title="3.RIP与OSPF的区别："></a>3.RIP与OSPF的区别：</h4><ul>
<li>相同点：<ol>
<li>RIPv2和OSPFv2都是无类别（传递路由信息时是否携带子网掩码）的路由协议</li>
<li>RIPv2（224.0.0.9）和OSPFv2（224.0.0.5，224.0.0.6）都使用组播来更新信息；所有224.0.0.X格式的组播地址我们称为本地链路组播，目的IP地址是本地链路组播的数据包中的TTL值被设定为1；所有本地链路组播都会存在对应的组播MAC地址，01-00-5e-后24位为组播IP地址的后24位</li>
<li>RIPv2和OSPFv2都支持等开销负载均衡</li>
</ol>
</li>
<li>不同点：<ol>
<li>RIPv2只能适用于中小型网络环境中，而OSPFv可以适用于中大型网络环境</li>
</ol>
</li>
</ul>
<h2 id="6-ACL访问控制列表："><a href="#6-ACL访问控制列表：" class="headerlink" title="6.ACL访问控制列表："></a>6.ACL访问控制列表：</h2><ul>
<li><p>作用：</p>
<ol>
<li>访问控制（在路由流量进或除的接口上，匹配流量产生动作（允许，决绝））</li>
<li>定义感兴趣流量（抓取流量，之后给其他的策略，让其他策略进行工作）</li>
</ol>
</li>
<li><p>匹配规则：</p>
<ul>
<li><p>至上而下逐已匹配，上条匹配按上条执行，不再查看下条；</p>
</li>
<li><p>ciso系统默认末尾隐含拒绝所有；华为系末尾隐含允许所有</p>
</li>
</ul>
</li>
<li><p>分类：</p>
<ol>
<li>标准：仅关注数据包中的<strong>源IP地址</strong>；故调用时必修尽量的靠近目标，避免对其他流量的误删，<strong>编号范围2000-2999</strong>，一个编号为一个表</li>
<li>扩展：关注数据包中的源，目标IP地址，<strong>目标端口号或协议号</strong>；<strong>编号范围3000-3999</strong>，由于扩展ACL<strong>源IP地址，目标IP地址</strong>均关注。故调用时尽量靠近源；</li>
</ol>
</li>
<li><p>匹配命令：</p>
<ul>
<li><h3 id="标准："><a href="#标准：" class="headerlink" title="标准："></a>标准：</h3><ol>
<li><p>选择路由器：因为只关注源IP地址，所以选择<strong>目标设备最近</strong>的路由器的最近接口（避免对流量进行误删）</p>
</li>
<li><p>定义acl列表名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acl [id]</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义规则：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rule [permit/deny] source [IP地址] [通配符]</span><br><span class="line">例：</span><br><span class="line">rule deny source 192.168.1.3 0.0.0.0   #拒绝一个IP地址</span><br><span class="line">rule deny source 192.168.2.0 0.0.0.255   #拒绝一个网段</span><br></pre></td></tr></table></figure>

<p>通配符：0代表固定，1代表可变</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">抓去1.1.1.0/24 - 1.1.255.0/24网段中的奇数网段和偶数网段</span></span><br><span class="line">奇数网段：rule deny source 1.1.1.0  0.0.254.0 </span><br><span class="line">偶数网段：rule deny source 1.1.0.0  0.0.254.0 </span><br></pre></td></tr></table></figure>
</li>
<li><p>在接口上调用ACL（一个接口的一个方向只能调用一张表）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">traffic-filter [inbound/outbound] acl [列表ID]</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><h3 id="扩展："><a href="#扩展：" class="headerlink" title="扩展："></a>扩展：</h3><ul>
<li><p>如果拒绝ping此路由器，此路由器所有接口需要设置</p>
</li>
<li><p>应该在<strong>与源设备最近的路由器</strong>配置（避免浪费资源）</p>
</li>
<li><p>配置：</p>
<ul>
<li><p>仅关注源IP地址和目标IP地址</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rule [permit/deny] ip source [源IP地址] [通配符] destination [目标IP地址] [通配符]</span><br><span class="line">例：</span><br><span class="line">rule deny ip source 192.168.1.3 0.0.0.0 destination 192.168.3.2 0.0.0.0  </span><br></pre></td></tr></table></figure>
</li>
<li><p>同时关注协议号，或目标端口号</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rule [permit/deny] [协议类型] source [源IP地址] [通配符] destination [目标IP地址] [通配符] destination-port eq [端口号]</span><br><span class="line">例：</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">该条ACL拒绝了192.168.1.3对192.168.3.2的telnet远程登录</span></span><br><span class="line">rule deny tcp source 192.168.1.3 0.0.0.0 destination 192.168.3.2 0.0.0.0 destination-port eq 23 </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">拒绝192.168.1.10 对192.168.1.1 的icmp访问--ping</span></span><br><span class="line">rule  deny icmp source  192.168.1.10 0.0.0.0 destination 192.168.1.1 0.0.0.0</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Telnet：远程登陆，不加密，基于TCP，目标端口23</p>
<ul>
<li><p>条件；1.被登录设备与登录设备网络可达，2.被登录设备进行了telent服务配置</p>
</li>
<li><p>被登录设备配置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">aaa     # 进入aaa模式</span><br><span class="line">local-user [用户名] privilege level [权限值] password cipher [密码]</span><br><span class="line">local-user [用户名] service-type telnet   # 该账号只用于什么登录</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user-interface vty 0 4     # 进入vty虚拟登录接口</span><br><span class="line">authentication-mode aaa    # 在vty线上开启认证</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="7-NAT网络地址转换："><a href="#7-NAT网络地址转换：" class="headerlink" title="7.NAT网络地址转换："></a>7.NAT网络地址转换：</h2><ul>
<li><p>概念：边界路由器对源IP地址或目标IP地址的修改</p>
</li>
<li><p>IPv4地址中，存在私有与公有IP地址的区别：</p>
<ul>
<li>公有：具有全球唯一性，可以在互联网通讯，需要付费使用</li>
<li>私有：具有本地唯一性，不能在互联网通讯，无需付费使用</li>
</ul>
</li>
<li><p>私有IP地址：A类：10.0.0.0&#x2F;8；B类：172.16.0.0&#x2F;16-172.31.0.0&#x2F;16；C类：192.168.0.0&#x2F;24-192.168.255.0&#x2F;24</p>
</li>
<li><p>分类：</p>
<ul>
<li>一对一（<strong>静态转换</strong>）：用于内部网络的服务器</li>
<li>一对多（<strong>easy-ip</strong>）：内部的多个私有ip地址转换为同一个公有ip<ul>
<li>简单的常用转换方式；属于动态性（PAT端口地址转换）</li>
<li>多个私有地址共用同一个公有地址时，为了实现同时收发数据，在ip地址被转换成同一个公有地址的同时，还需要使用不同的源端口号来进行区分；</li>
<li>由于端口号的数量限制，故在内部存在大量流量需要进入互联网时，若超过65535数量时，只能排队等候，导致网络延时，可以启用多对多；</li>
</ul>
</li>
<li>多对多（<strong>动态转换</strong>）：内部的多个私有IP地址可以转换为多个公有IP地址<ul>
<li>当内部存在大量的私有ip地址时，为保障网络的传输效率，需要多个公有ip地址循环提供端口来进行转换</li>
</ul>
</li>
<li>端口映射：基于一个公有IP地址的特定端口进行转换<ul>
<li>Network Address Port Translation（<strong>NAPT</strong>）：网络地址端口转换</li>
<li>将边界路由器上的公有ip地址的某个特定端口与内部单个ip地址的特定端口进行映射</li>
</ul>
</li>
</ul>
</li>
<li><h3 id="一对多配置命令："><a href="#一对多配置命令：" class="headerlink" title="一对多配置命令："></a>一对多配置命令：</h3><ol>
<li><p>先配置acl访问列表（让acl抓取流量，在边界路由器上）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">acl 2000</span><br><span class="line">rule permit source [IP网段/IP地址] [通配符]      # 通配符中0表示固定</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入边界路由器接口，</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nat [inbound/outbound] [acl列表id]        # 公用IP地址为边界路由器接口IP地址</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><h3 id="一对一配置命令（先进入边界路由器接口）："><a href="#一对一配置命令（先进入边界路由器接口）：" class="headerlink" title="一对一配置命令（先进入边界路由器接口）："></a>一对一配置命令（先进入边界路由器接口）：</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在边界路由器上连接公网的外部接口上，固定的将内部192.168.1.10与外部12.1.1.3进行绑定</span></span><br><span class="line">nat static global [要绑定公用IP地址] inside [内部绑定IP地址]</span><br></pre></td></tr></table></figure>
</li>
<li><h3 id="端口映射配置命令（先进入边界路由器接口）："><a href="#端口映射配置命令（先进入边界路由器接口）：" class="headerlink" title="端口映射配置命令（先进入边界路由器接口）："></a>端口映射配置命令（先进入边界路由器接口）：</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">公用IP地址为边界路由器接口IP地址，公网端口为边界路由器接口端口</span></span><br><span class="line">nat server protocol tcp global current-interface [公网端口号] inside [内网IP地址] [端口号]  </span><br></pre></td></tr></table></figure>
</li>
<li><h3 id="多对多配置命令（先进入边界路由器接口）："><a href="#多对多配置命令（先进入边界路由器接口）：" class="headerlink" title="多对多配置命令（先进入边界路由器接口）："></a>多对多配置命令（先进入边界路由器接口）：</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nat address-group [分组号] [公用开始IP地址] [公用结束IP地址]   # 定义可用的公用IP地址段</span><br><span class="line">acl 2000</span><br><span class="line">rule permit source [IP网段/IP地址] [通配符]      # 通配符中0表示固定</span><br><span class="line">nat outbound [列表ID] address-group [分组号]</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">扩展配置，no-pat若在多对多的命令末尾添加no-pat单词，那么将成为静态nat，最先出来的私有ip将一对一与这些公有ip形成静态的绑定关系，使得后出来的私有ip不能再被转换为公有；</span></span><br><span class="line">nat outbound [列表ID] address-group [分组号] no-pat</span><br></pre></td></tr></table></figure></li>
</ul>
<p>​	</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://example.com">阿尔托莉雅</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://example.com/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/3.HCIA-%E5%8D%8E%E4%B8%BA%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%92%8C%EF%BC%8C%E8%B7%AF%E7%94%B1%EF%BC%8C%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%EF%BC%8CACL/">https://example.com/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/3.HCIA-%E5%8D%8E%E4%B8%BA%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%92%8C%EF%BC%8C%E8%B7%AF%E7%94%B1%EF%BC%8C%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%EF%BC%8CACL/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%BD%91%E7%BB%9C/">网络</a></div><div class="post_share"><div class="social-share" data-image="/images/Otherwallpaper/avatar.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/4.HCIP-%E7%BD%91%E7%BB%9C%E7%B1%BB%E5%9E%8BGREOSPF/" title="HCIP-网络类型GREOSPF"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">HCIP-网络类型GREOSPF</div></div></a></div><div class="next-post pull-right"><a href="/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/2.HCIA-OSI%E6%A8%A1%E5%9E%8B%E5%92%8CTCPIP%E6%A8%A1%E5%9E%8B/" title="HICA-OSI模型和TCP/IP模型"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">HICA-OSI模型和TCP/IP模型</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/1.HICA-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E5%BF%B5/" title="HICA-计算机网络概念"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-19</div><div class="title">HICA-计算机网络概念</div></div></a></div><div><a href="/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/2.HCIA-OSI%E6%A8%A1%E5%9E%8B%E5%92%8CTCPIP%E6%A8%A1%E5%9E%8B/" title="HICA-OSI模型和TCP&#x2F;IP模型"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-19</div><div class="title">HICA-OSI模型和TCP&#x2F;IP模型</div></div></a></div><div><a href="/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/4.HCIP-%E7%BD%91%E7%BB%9C%E7%B1%BB%E5%9E%8BGREOSPF/" title="HCIP-网络类型GREOSPF"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-19</div><div class="title">HCIP-网络类型GREOSPF</div></div></a></div><div><a href="/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/5.HICP-BGPIPv6/" title="HICP-BGPIPv6"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-19</div><div class="title">HICP-BGPIPv6</div></div></a></div><div><a href="/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/6.%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF%E5%92%8C%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84/" title="交换技术和三层架构"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-19</div><div class="title">交换技术和三层架构</div></div></a></div><div><a href="/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/9.%E7%BD%91%E7%BB%9C%E9%9D%A2%E8%AF%95%E9%A2%98/" title="网络面试题"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-19</div><div class="title">网络面试题</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Disqus</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/images/Otherwallpaper/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">阿尔托莉雅</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://toscode.gitee.com/blue-fantasy" target="_blank" title="Gitee"><i class="fab fa-github"></i></a><a class="social-icon" href="/1095322098@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%8D%8E%E4%B8%BA%E6%A8%A1%E6%8B%9F%E5%99%A8%EF%BC%9A"><span class="toc-number">1.</span> <span class="toc-text">1.华为模拟器：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%93%8D%E4%BD%9C%E6%A8%A1%E5%BC%8F%EF%BC%9A"><span class="toc-number">1.1.</span> <span class="toc-text">1.操作模式：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%94%A8%E6%88%B7%E8%A7%86%E5%9B%BE%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="toc-number">1.2.</span> <span class="toc-text">2.用户视图配置命令：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%85%8D%E7%BD%AE%E6%A8%A1%E5%BC%8F%EF%BC%9A"><span class="toc-number">1.3.</span> <span class="toc-text">3.配置模式：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%8E%A5%E5%8F%A3%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="toc-number">1.4.</span> <span class="toc-text">4.接口配置命令：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%B8%AE%E5%8A%A9%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="toc-number">1.5.</span> <span class="toc-text">5.帮助命令：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%91%BD%E4%BB%A4%E7%BA%A7%E5%88%AB%EF%BC%9A"><span class="toc-number">1.6.</span> <span class="toc-text">6.命令级别：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Telnet%EF%BC%88%E7%94%A8%E6%88%B7%EF%BC%89%EF%BC%9A"><span class="toc-number">2.</span> <span class="toc-text">2.Telnet（用户）：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-DHCP%E6%9C%8D%E5%8A%A1%EF%BC%9A"><span class="toc-number">3.</span> <span class="toc-text">3.DHCP服务：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%9C%B0%E5%9D%80%E6%B1%A0%E9%85%8D%E7%BD%AE%EF%BC%9A"><span class="toc-number">3.1.</span> <span class="toc-text">全局地址池配置：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E5%9C%B0%E5%9D%80%E6%B1%A0%E9%85%8D%E7%BD%AE%EF%BC%9A%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">3.2.</span> <span class="toc-text">接口地址池配置：（了解）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-VLAN%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">4.</span> <span class="toc-text">4.VLAN虚拟局域网</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E8%B7%AF%E7%94%B1%EF%BC%9A"><span class="toc-number">5.</span> <span class="toc-text">5.路由：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%EF%BC%9A"><span class="toc-number">5.1.</span> <span class="toc-text">1.静态路由：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%B7%AF%E7%94%B1%E6%89%A9%E5%B1%95%E9%85%8D%E7%BD%AE%EF%BC%9A"><span class="toc-number">5.2.</span> <span class="toc-text">2.路由扩展配置：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">5.3.</span> <span class="toc-text">3.动态路由</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EAS%E8%BF%9B%E8%A1%8C%E5%88%86%E7%B1%BB%EF%BC%9A%EF%BC%88AS%E8%87%AA%E6%B2%BB%E7%B3%BB%E7%BB%9F-0-65535%E6%A0%87%E5%87%86%E7%BC%96%E5%8F%B7%EF%BC%89"><span class="toc-number">5.3.1.</span> <span class="toc-text">基于AS进行分类：（AS自治系统 0~65535标准编号）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IGP%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="toc-number">5.3.2.</span> <span class="toc-text">IGP分类：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-RIP%E5%8D%8F%E8%AE%AE%EF%BC%9A"><span class="toc-number">5.3.3.</span> <span class="toc-text">1.RIP协议：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RIP%E7%8E%AF%E8%B7%AF%E9%97%AE%E9%A2%98%EF%BC%9A"><span class="toc-number">5.4.</span> <span class="toc-text">RIP环路问题：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-OSPF%E5%8D%8F%E8%AE%AE%EF%BC%9A"><span class="toc-number">5.4.1.</span> <span class="toc-text">2.OSPF协议：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OSPF%E7%9A%84%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%9A"><span class="toc-number">5.5.</span> <span class="toc-text">OSPF的工作过程：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%BA%E5%9F%9F%E5%88%92%E5%88%86%E8%A7%84%E5%88%99%EF%BC%9A"><span class="toc-number">5.5.1.</span> <span class="toc-text">区域划分规则：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RID%EF%BC%88%E8%B7%AF%E7%94%B1%E5%99%A8id%EF%BC%89%EF%BC%9A"><span class="toc-number">5.6.</span> <span class="toc-text">RID（路由器id）：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-RIP%E4%B8%8EOSPF%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9A"><span class="toc-number">5.6.1.</span> <span class="toc-text">3.RIP与OSPF的区别：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-ACL%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%EF%BC%9A"><span class="toc-number">6.</span> <span class="toc-text">6.ACL访问控制列表：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E5%87%86%EF%BC%9A"><span class="toc-number">6.1.</span> <span class="toc-text">标准：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%EF%BC%9A"><span class="toc-number">6.2.</span> <span class="toc-text">扩展：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-NAT%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%EF%BC%9A"><span class="toc-number">7.</span> <span class="toc-text">7.NAT网络地址转换：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="toc-number">7.1.</span> <span class="toc-text">一对多配置命令：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E4%B8%80%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4%EF%BC%88%E5%85%88%E8%BF%9B%E5%85%A5%E8%BE%B9%E7%95%8C%E8%B7%AF%E7%94%B1%E5%99%A8%E6%8E%A5%E5%8F%A3%EF%BC%89%EF%BC%9A"><span class="toc-number">7.2.</span> <span class="toc-text">一对一配置命令（先进入边界路由器接口）：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4%EF%BC%88%E5%85%88%E8%BF%9B%E5%85%A5%E8%BE%B9%E7%95%8C%E8%B7%AF%E7%94%B1%E5%99%A8%E6%8E%A5%E5%8F%A3%EF%BC%89%EF%BC%9A"><span class="toc-number">7.3.</span> <span class="toc-text">端口映射配置命令（先进入边界路由器接口）：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4%EF%BC%88%E5%85%88%E8%BF%9B%E5%85%A5%E8%BE%B9%E7%95%8C%E8%B7%AF%E7%94%B1%E5%99%A8%E6%8E%A5%E5%8F%A3%EF%BC%89%EF%BC%9A"><span class="toc-number">7.4.</span> <span class="toc-text">多对多配置命令（先进入边界路由器接口）：</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/9.%E7%BD%91%E7%BB%9C%E9%9D%A2%E8%AF%95%E9%A2%98/" title="网络面试题">网络面试题</a><time datetime="2023-03-19T11:48:57.129Z" title="Created 2023-03-19 19:48:57">2023-03-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/6.%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF%E5%92%8C%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84/" title="交换技术和三层架构">交换技术和三层架构</a><time datetime="2023-03-19T11:48:57.125Z" title="Created 2023-03-19 19:48:57">2023-03-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/5.HICP-BGPIPv6/" title="HICP-BGPIPv6">HICP-BGPIPv6</a><time datetime="2023-03-19T11:48:57.120Z" title="Created 2023-03-19 19:48:57">2023-03-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/4.HCIP-%E7%BD%91%E7%BB%9C%E7%B1%BB%E5%9E%8BGREOSPF/" title="HCIP-网络类型GREOSPF">HCIP-网络类型GREOSPF</a><time datetime="2023-03-19T11:48:57.116Z" title="Created 2023-03-19 19:48:57">2023-03-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/3.HCIA-%E5%8D%8E%E4%B8%BA%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%92%8C%EF%BC%8C%E8%B7%AF%E7%94%B1%EF%BC%8C%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%EF%BC%8CACL/" title="HCIA-华为模拟器和，路由，控制列表，ACL">HCIA-华为模拟器和，路由，控制列表，ACL</a><time datetime="2023-03-19T11:48:57.111Z" title="Created 2023-03-19 19:48:57">2023-03-19</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 阿尔托莉雅</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '',
      appKey: '',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'https://example.com/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/3.HCIA-%E5%8D%8E%E4%B8%BA%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%92%8C%EF%BC%8C%E8%B7%AF%E7%94%B1%EF%BC%8C%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%EF%BC%8CACL/'
    this.page.identifier = '/2023/03/19/1.%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/3.HCIA-%E5%8D%8E%E4%B8%BA%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%92%8C%EF%BC%8C%E8%B7%AF%E7%94%B1%EF%BC%8C%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%EF%BC%8CACL/'
    this.page.title = 'HCIA-华为模拟器和，路由，控制列表，ACL'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }

  document.getElementById('darkmode').addEventListener('click', () => {
    setTimeout(() => window.disqusReset(), 200)
  })
}

if ('Valine' === 'Disqus' || !true) {
  if (true) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script></div><div class="aplayer" data-id="2873491355" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>